"use strict";(self.webpackChunkcheatsheet=self.webpackChunkcheatsheet||[]).push([[7994],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=i.createContext({}),l=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=l(n),h=r,m=u["".concat(c,".").concat(h)]||u[h]||d[h]||s;return n?i.createElement(m,a(a({ref:t},p),{},{components:n})):i.createElement(m,a({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,a=new Array(s);a[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,a[1]=o;for(var l=2;l<s;l++)a[l]=n[l];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8211:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var i=n(7462),r=(n(7294),n(3905));const s={},a="Security",o={unversionedId:"Concepts/Frontend/Security",id:"Concepts/Frontend/Security",title:"Security",description:"Types of Attacks",source:"@site/docs/Concepts/Frontend/Security.md",sourceDirName:"Concepts/Frontend",slug:"/Concepts/Frontend/Security",permalink:"/cheatsheet/docs/Concepts/Frontend/Security",draft:!1,editUrl:"https://github.com/niqiukun/cheatsheet/blob/master/docs/Concepts/Frontend/Security.md",tags:[],version:"current",frontMatter:{},sidebar:"conceptsSidebar",previous:{title:"OSI Model",permalink:"/cheatsheet/docs/Concepts/Frontend/OSI Model"},next:{title:"Storage",permalink:"/cheatsheet/docs/Concepts/Frontend/Storage"}},c={},l=[{value:"Types of Attacks",id:"types-of-attacks",level:2},{value:"Cross-Site Scripting (XSS)",id:"cross-site-scripting-xss",level:3},{value:"Cross-Site Request Forgery (CSRF)",id:"cross-site-request-forgery-csrf",level:3},{value:"HTTPS",id:"https",level:2}],p={toc:l};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"security"},"Security"),(0,r.kt)("h2",{id:"types-of-attacks"},"Types of Attacks"),(0,r.kt)("h3",{id:"cross-site-scripting-xss"},"Cross-Site Scripting (XSS)"),(0,r.kt)("admonition",{title:"Info",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Read more about the details:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://tech.meituan.com/2018/09/27/fe-security.html"},"https://tech.meituan.com/2018/09/27/fe-security.html")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_scripting_xss"},"https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_scripting_xss")))),(0,r.kt)("p",null,"Cross-site scripting (XSS) happens when the attacker achieves arbitrary code execution on the attacked frontend application. There are three types of XSS attacks: stored (persistent), reflected (non-persistent), and DOM-based XSS attacks. For the first two, the malicious code comes from the backend, while for the last, the malicious code comes from frontend user input."),(0,r.kt)("p",null,"Fully client-side rendered app prevents the execution of malicious code included in the backend response. This is because frontend frameworks such as React explicitly set text or attributes of DOM elements by calling ",(0,r.kt)("inlineCode",{parentName:"p"},".innerText")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".setAttribute"),", instead of directly setting ",(0,r.kt)("inlineCode",{parentName:"p"},".innerHTML"),". Yet, one still has to be cautious about DOM-based XSS attacks, and whether there are usages of ",(0,r.kt)("inlineCode",{parentName:"p"},"dangerouslySetInnerHTML")," in the app."),(0,r.kt)("p",null,"Many DOM-based XSS attacks exploit JavaScript actions that are triggered based on setting / providing a string input, such as setting ",(0,r.kt)("inlineCode",{parentName:"p"},"window.location"),", assigning ",(0,r.kt)("inlineCode",{parentName:"p"},"href")," attribute of ",(0,r.kt)("inlineCode",{parentName:"p"},"<a>"),", using ",(0,r.kt)("inlineCode",{parentName:"p"},"eval()")," / ",(0,r.kt)("inlineCode",{parentName:"p"},"setTimeout()")," / ",(0,r.kt)("inlineCode",{parentName:"p"},"setInterval()")," with a string. In these cases, directly using input from users should always be avoided. Sometimes it is common to have a ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect")," as one of the url parameters, and in this case the url parameter must be whitelisted to avoid ",(0,r.kt)("inlineCode",{parentName:"p"},"javascript:"),"."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"},(0,r.kt)("strong",{parentName:"a"},"Content Security Policy (CSP)"))," helps to mitigate XSS attacks by preventing code execution on browsers from untrusted sources. By specifying a domain in the CSP header included in backend's response, the browser does not load JavaScript scripts that are outside the specified domain even if the frontend application (which may be compromised) asks for it."),(0,r.kt)("h3",{id:"cross-site-request-forgery-csrf"},"Cross-Site Request Forgery (CSRF)"),(0,r.kt)("admonition",{title:"Info",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Read more about the details:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://tech.meituan.com/2018/10/11/fe-security-csrf.html"},"https://tech.meituan.com/2018/10/11/fe-security-csrf.html")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_request_forgery_csrf"},"https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_request_forgery_csrf")))),(0,r.kt)("p",null,"Cross-site request forgery (CSRF) happens when the attacker tricks a user to visit a malicious frontend application that calls some backend API of another site, with the user's credentials for another site (stored in cookies)."),(0,r.kt)("p",null,"One way to address this issue is to disallow an HTTP request initiated by an untrusted origin from accessing the resource. This is possible given that the ",(0,r.kt)("inlineCode",{parentName:"p"},"origin")," field, included in requests made by browsers, is not modifiable by the frontend app. Hence, if the ",(0,r.kt)("inlineCode",{parentName:"p"},"origin")," does not match the whitelist specified at backend side, the access should be denied."),(0,r.kt)("p",null,"Another way is to use a ",(0,r.kt)("strong",{parentName:"p"},"CSRF Token"),", which is a randomized token generated by the server serving the frontend app and is inserted into the DOM elements (",(0,r.kt)("inlineCode",{parentName:"p"},"<a>")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"<form>"),"). When a request is made to the backend API, the backend should check for the token's validity to ensure that it does match the current session, and deny the access otherwise."),(0,r.kt)("h2",{id:"https"},"HTTPS"),(0,r.kt)("admonition",{title:"Prerequisites",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Knowledge of symmetric encryption and asymmetric encryption is assumed.")),(0,r.kt)("p",null,"HTTPS is the HTTP protocol secured with ",(0,r.kt)("strong",{parentName:"p"},"Transport Layer Security (TLS)"),". A TLS connection is established with the following steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Client initiates the connection to the server with a list of supported cipher suites."),(0,r.kt)("li",{parentName:"ol"},"Server picks a cipher and notifies the client of its decision."),(0,r.kt)("li",{parentName:"ol"},"Server sends the client with its public key and a digital certificate signed by CA, which contains the server's public key encrypted with CA's private key."),(0,r.kt)("li",{parentName:"ol"},"Client verifies server's identity by comparing the public key received and the public key contained in the digital certificate, decrypted using CA's public key."),(0,r.kt)("li",{parentName:"ol"},"Client establishes a session key with server using the Diffie\u2013Hellman key exchange:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Client and server agree on a common base."),(0,r.kt)("li",{parentName:"ol"},"Client and server applies their secrets respectively on a common base."),(0,r.kt)("li",{parentName:"ol"},"Client and server exchanges the base applied with secrets."),(0,r.kt)("li",{parentName:"ol"},"Client and server applies their secrets on the changed base once again."),(0,r.kt)("li",{parentName:"ol"},"The final results are only known to client and server themselves and not by the public."))),(0,r.kt)("li",{parentName:"ol"},"Client and server communicate (encrypt and decrypt messages) with the common session key.")),(0,r.kt)("admonition",{title:"Note",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The Diffie\u2013Hellman key exchange is optional and is for an additional layer of security: even if server's private key is leaked some time later, the current session cannot be decrypted. This is because it is impossible to obtain the session key using only server's private key, without knowing client's private key."),(0,r.kt)("p",{parentName:"admonition"},"If the key exchange is not used, client simply generates a random number as the session key, encrypt it using server's public key, and send it to server. Server obtains the session key by decrypting the message from client. However, if server's private key is leaked some time later, the session key is directly exposed.")))}d.isMDXComponent=!0}}]);